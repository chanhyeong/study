= 11. 테스트 리팩토링

== 불필요한 테스트 코드

코드 제거

명시적인 try/catch block 은 가치가 없다

not null 체크는 군더더기다 +
(IDE 에서 잡아서 넣은 경우도 있긴 함)

== 추상화 누락

필수적인 개념을 최대화, 불필요한 세부사항 감추기

세부 사항 여러 줄을 포괄하는 사용자 정의 단언문 만들기 +
7장에서 나온 `org.hamcrest.TypeSafeMatcher` 이용

== 부적절한 정보

테스트에 사용된 데이터는 스토리를 말하는데 도움을 주어야 한다

매직 리터럴은 이름을 가진 상수로 변경하여 의미를 즉시 파악할 수 있게

== 부분 생성 (Bloated Construction)

테스트 대상 객체를 생성하는 helper method 만들기 +
= 세부 사항 숨기기

== 다수의 단언

여러 개의 단언이 있다는 것은 테스트 케이스 여러 개를 포함하고 있다는 것

TIP: 테스트마다 단언 하나 - 테스트 이름을 깔끔하게 만들기 쉽다

== 테스트와 무관한 세부 사항들

군더더기들을 `@Before`, `@After` 로 이동 +
(책에서는 log, InputStream.close)

이동할 때는 테스트를 이해하는 데 필요한 정보는 제거하지 않았는지 확인

TIP: 좋은 테스트는 테스트를 이해하는 데 다른 함수를 파헤치지 않도록 한다

== 잘못된 조직

AAA 를 활용하여 의도를 분명하게

== 암시적 의미

테스트가 대답해야 할 질문 - "왜 그러한 결과를 기대하는가?"

기대하는 이유가 분명하지 않다면 해답을 찾기 위해 코드를 다 열어봐야 한다

의미 있는 상수, 더 좋은 변수명, 더 좋은 데이터로 변경

== 새로운 테스트 추가

위의 과정을 거치면서 테스트를 분할하면 새로운 테스트 추가가 쉬워진다

