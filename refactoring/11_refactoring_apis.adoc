== 11. API 리팩토링

=== 질의 함수와 변경 함수 분리하기 (Sepreate Query from Modifier)

==== 배경

* observable side effect (겉보기 부수효과) 가 없이 반환하는 함수를 만들어야 한다
* 질의 함수는 모두 side effect 가 없어야 한다
** Command-Query Seperation
* 캐싱도 객체의 상태를 변경하지만 객체 밖에서는 관찰할 수 없다

==== 절차

. 대상 함수 복제, 질의를 위한 네이밍
. 새 질의 함수에서 side effect 제거
. 컴파일
. 원래 함수를 호출 코드를 대체
** 반환 값을 사용?: 질의 함수 호출 -> 원래 함수를 호출하는 코드를 바로 아래 추가
. 원래 함수에서 질의 관련 코드 제거
. 테스트

=== 함수 매개변수화하기 (Parameterize Function)

==== 배경

* 로직이 비슷하고 리터럴 값만 다른 경우

==== 절차

. 비슷한 함수 선택
. 함수 선언 바꾸기로 리터럴을 매개변수로 추가
. 함수 호출하는 곳에 리터럴 값 추가
. 테스트
. 매개변수로 받은 값을 사용하도록 본문 수정
. 비슷한 코드 전부 대체

=== 플래그 인수 제거하기 (Remove Flag Argument)

==== 배경

* flag argument: 함수가 실행할 로직을 선택하기 위해 전달하는 argument
* 호출할 수 있는 함수들이 무엇이고 어떻게 하는지 이해가 어려움

==== 절차

. 매개변수로 주어질 수 있는 값 가각 대응하는 명시적 함수 생성
. 원래 함수를 대체
