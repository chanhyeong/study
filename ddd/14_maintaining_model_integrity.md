# 14. 모델의 무결성 유지

대규모 시스템의 도메인을 단일화하는건 타당하지 않거나 비용 대비 효과적이지 않을 것

복수 모델에 대한 거부감
- 여러 개의 모델 때문에 통합이 제한되고, 의사소통이 어려워져 발생하는 비용
- 여러 모델이 세련되보이지 않게 보일 수 있음

여러 모델 간의 경계와 관계를 표시해줄 수단

![image](https://user-images.githubusercontent.com/10507662/130462549-0f061311-2a8f-402b-8788-fbcd4924c050.png)

> CONTEXT MAP - 프로젝트의 컨텍스트와 각 컨텍스트 간의 관계의 전체적인 개관 제공  
> BOUNDED CONTEXT - 각 모델의 범위 정의  
> CONTINOUS INTEGRATION - 모델의 단일화 유지

## BOUNDED CONTEXT
무엇을 공유하고 무엇을 공유하지 않을지 명시하는 경계

개별적인 모델로 작성된 코드가 섞이면
- 많은 버그, 신뢰성 하락, 이해하기 힘든 소프트웨어, 구성원 간 의사소통 혼란
- 어떤 컨텍스트에서 어떤 모델을 사용해서는 안 되는지 불분명

### 모델은 컨텍스트에 적용
- 컨텍스트: 코드의 특정 부분 or 개별 팀이 수행하는 업무
- 회의를 거친 모델 -> 대화로 컨텍스트를 국한
- 모델 컨텍스트: 모델에서 사용된 용어를 특정한 의미로 의사소통하기 위한 조건의 집합

### 모델이 적용되는 컨텍스트를 명시적으로 정의
- 컨텍스트의 경계를 `팀, 애플리케이션의 특정 부분 사용법, 코드 기반, DB schema` 와 같은 **물리적인 형태**로 명시적으로 설정
- 경계 내에서는 모델을 일관된 상태로 유지, 바깥 이슈로 혼란스러워지면 안됨

팀 구성원이 어떤 부분에서 일관성을 갖고, 다른 context 와 어떤 식으로 관련되어 있는가를 명확하게 이해할 수 있게 **모델 적용 범위 제한**

서로 다른 컨텍스트에서는 용어, 개념과 규칙, UL 에 포함된 dialect 에 차이를 보이는 서로 다른 모델 적용

경계 정의 -> 영역 내 모델을 순수하게 유지 + 다른 context 로 초점을 옮길 때 혼란을 피할 수 있음

여러 경계에 걸친 통합에는 어느 정도의 translation 수반 (translation 은 context 밖, 경계의 일부에 있다)

> BOUND CONTEXT 은 MODULE 이 아니다

#### 예제
BOUNDED CONTEXT: 예약

화물추적 시스템은 translation 을 통해 연동

화물선 운항 일정 관리는 BOUNDED CONTEXT 로 일하고 있는 것이 아님. SHARED KERNEL 이 대안

### BOUNDED CONTEXT 내 균열 인식
CI 프로세스가 문제점을 발견하는데 도움. 초기에는 언어 혼동

구분되는 요소를 결합할 경우
- duplicate concepts (중복 개념)
  - 같은 개념을 나타내는 2개의 모델 요소가 존재
- false cognates (허위 어원)
  - 같은 용어를 사용하는 두 사람이 서로 다른 것을 이야기하고 있다고 생각

## CONTINUOUS INTEGRATION
모델 단편화의 가능성, 시스템을 작은 CONTEXT 로 분할하면 통합과 응집성을 잃게 될 수 있음

규모와 상관없이 통합된 시스템을 개발하기 위함
- 내부적으로 균열이 발생할 때 빠르게 포착하고 정정할 수 있게 **컨텍스트 내의 모든 작업을 병합하여 일관성을 유지**
- UL 을 다듬고, 모델 균열을 조기에 드러내는 체계적인 merge/build/test 프로세스를 토대로 통합
- 통합을 위한 프로세스
  - 단계적이고 재생성이 가능한 merge/build
  - 자동화된 테스트 suite
  - 통합되지 않은 변경점 유지에 대해 적당한 최소 시간을 설정하는 규칙 (머지 기한 설정?)

자동화된 테스트 + 구현 산출물을 merge 하는 프로세스 수립 + 끊임없는 UL 사용

CI 는 오직 하나의 BOUNDED CONTEXT 내에서만 필수적? -> translation 을 비롯한 인접한 context 와 관련된걸 똑같은 수준으로 다룰 필요는 없음  
(외부 연동은 CI 가 필요 없다는건가)

여러 BOUNDED CONTEXT 가 존재한다면 그 간의 관계를 결정하고 필요한 인터페이스를 설계해야 함